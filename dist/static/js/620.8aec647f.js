"use strict";(self["webpackChunkswift_share"]=self["webpackChunkswift_share"]||[]).push([[620],{3620:function(e,a,l){l.d(a,{A:function(){return V}});var i=l(6768),t=l(4232),u=l(5130);const r={class:"music-player-container"},s={class:"music-player-content"},o={class:"album-cover-section"},n={class:"album-cover"},c=["src","alt"],v={key:0,class:"play-overlay"},d={class:"player-controls"},m={class:"track-info"},I={class:"track-title"},b={class:"track-artist"},k={class:"track-album"},g={class:"progress-section"},M={class:"time-display"},Z={class:"current-time"},p={class:"total-time"},w={class:"control-buttons"},W={class:"volume-section"},L={class:"playlist-section"},T={class:"playlist-header"},y={class:"playlist"},C=["onClick"],h={class:"track-number"},j={class:"track-info"},f={class:"track-name"},F={class:"track-duration"},B={class:"track-actions"};function Q(e,a,l,Q,z,G){const P=(0,i.g2)("VideoPlay"),X=(0,i.g2)("el-icon"),H=(0,i.g2)("el-slider"),R=(0,i.g2)("el-button"),V=(0,i.g2)("VideoPause"),A=(0,i.g2)("Microphone"),x=(0,i.g2)("Refresh"),_=(0,i.g2)("Star"),S=(0,i.g2)("StarFilled"),D=(0,i.g2)("el-dialog");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(D,{modelValue:Q.visible,"onUpdate:modelValue":a[2]||(a[2]=e=>Q.visible=e),title:Q.currentTrack?.title||"音乐播放",width:"70%","close-on-click-modal":!1,"close-on-press-escape":!0,class:"music-player-dialog",onClose:Q.handleClose},{default:(0,i.k6)(()=>[(0,i.Lk)("div",s,[(0,i.Lk)("div",o,[(0,i.Lk)("div",n,[(0,i.Lk)("img",{src:Q.currentTrack?.cover||Q.currentAlbum?.cover,alt:Q.currentTrack?.title},null,8,c),Q.isPlaying?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",v,[(0,i.bF)(X,{size:"48"},{default:(0,i.k6)(()=>[(0,i.bF)(P)]),_:1})]))])]),(0,i.Lk)("div",d,[(0,i.Lk)("div",m,[(0,i.Lk)("h2",I,(0,t.v_)(Q.currentTrack?.title||"未知歌曲"),1),(0,i.Lk)("p",b,(0,t.v_)(Q.currentTrack?.artist||"Taylor Swift"),1),(0,i.Lk)("p",k,(0,t.v_)(Q.currentAlbum?.name||"未知专辑"),1)]),(0,i.Lk)("div",g,[(0,i.Lk)("div",M,[(0,i.Lk)("span",Z,(0,t.v_)(Q.formatTime(Q.currentTime)),1),(0,i.Lk)("span",p,(0,t.v_)(Q.formatTime(Q.duration)),1)]),(0,i.bF)(H,{modelValue:Q.progress,"onUpdate:modelValue":a[0]||(a[0]=e=>Q.progress=e),max:100,onChange:Q.seekTo,class:"progress-slider"},null,8,["modelValue","onChange"])]),(0,i.Lk)("div",w,[(0,i.bF)(R,{circle:"",size:"large",onClick:Q.previousTrack,disabled:!Q.canGoPrevious},{default:(0,i.k6)(()=>[(0,i.bF)(X,null,{default:(0,i.k6)(()=>[(0,i.bF)(P)]),_:1})]),_:1},8,["onClick","disabled"]),(0,i.bF)(R,{circle:"",size:"large",type:"primary",onClick:Q.togglePlay},{default:(0,i.k6)(()=>[Q.isPlaying?((0,i.uX)(),(0,i.Wv)(X,{key:0},{default:(0,i.k6)(()=>[(0,i.bF)(V)]),_:1})):((0,i.uX)(),(0,i.Wv)(X,{key:1},{default:(0,i.k6)(()=>[(0,i.bF)(P)]),_:1}))]),_:1},8,["onClick"]),(0,i.bF)(R,{circle:"",size:"large",onClick:Q.nextTrack,disabled:!Q.canGoNext},{default:(0,i.k6)(()=>[(0,i.bF)(X,null,{default:(0,i.k6)(()=>[(0,i.bF)(P)]),_:1})]),_:1},8,["onClick","disabled"])]),(0,i.Lk)("div",W,[(0,i.bF)(X,null,{default:(0,i.k6)(()=>[(0,i.bF)(A)]),_:1}),(0,i.bF)(H,{modelValue:Q.volume,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.volume=e),max:100,onChange:Q.setVolume,class:"volume-slider"},null,8,["modelValue","onChange"])])]),(0,i.Lk)("div",L,[(0,i.Lk)("div",T,[a[4]||(a[4]=(0,i.Lk)("h3",null,"播放列表",-1)),(0,i.bF)(R,{size:"small",onClick:Q.toggleShuffle},{default:(0,i.k6)(()=>[(0,i.bF)(X,null,{default:(0,i.k6)(()=>[(0,i.bF)(x)]),_:1}),a[3]||(a[3]=(0,i.eW)(" 随机播放 ",-1))]),_:1,__:[3]},8,["onClick"])]),(0,i.Lk)("div",y,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Q.playlist,(e,a)=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,t.C4)(["playlist-item",{active:Q.currentTrackIndex===a}]),onClick:e=>Q.playTrack(a)},[(0,i.Lk)("div",h,(0,t.v_)(a+1),1),(0,i.Lk)("div",j,[(0,i.Lk)("div",f,(0,t.v_)(e.title),1),(0,i.Lk)("div",F,(0,t.v_)(Q.formatTime(e.duration)),1)]),(0,i.Lk)("div",B,[(0,i.bF)(R,{size:"small",circle:"",onClick:(0,u.D$)(a=>Q.toggleFavorite(e),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)(X,null,{default:(0,i.k6)(()=>[e.isFavorite?((0,i.uX)(),(0,i.Wv)(S,{key:1})):((0,i.uX)(),(0,i.Wv)(_,{key:0}))]),_:2},1024)]),_:2},1032,["onClick"])])],10,C))),128))])])])]),_:1},8,["modelValue","title","onClose"])])}var z=l(144),G=l(7477),P=l(1219),X={name:"MusicPlayer",components:{VideoPlay:G.VideoPlay,VideoPause:G.VideoPause,Microphone:G.Microphone,Refresh:G.Refresh,Star:G.Star,StarFilled:G.StarFilled},props:{modelValue:{type:Boolean,default:!1},album:{type:Object,default:null},song:{type:Object,default:null}},emits:["update:modelValue","track-end"],setup(e,{emit:a}){const l=(0,z.KR)(null),t=(0,z.KR)(!1),u=(0,z.KR)(0),r=(0,z.KR)(0),s=(0,z.KR)(50),o=(0,z.KR)(0),n=(0,z.KR)(!1),c=(0,z.KR)([]),v=(0,z.KR)([{id:1,title:"Anti-Hero",artist:"Taylor Swift",duration:200,cover:"",isFavorite:!1,url:"/audio/anti-hero.mp3"},{id:2,title:"Cruel Summer",artist:"Taylor Swift",duration:178,cover:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzljMjdiMCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Q3J1ZWwgU3VtbWVyPC90ZXh0Pjwvc3ZnPg==",isFavorite:!0,url:"/audio/cruel-summer.mp3"},{id:3,title:"Cardigan",artist:"Taylor Swift",duration:239,cover:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmOTgwMCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Q2FyZGlnYW48L3RleHQ+PC9zdmc+",isFavorite:!1,url:"/audio/cardigan.mp3"},{id:4,title:"Lover",artist:"Taylor Swift",duration:221,cover:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzIxOTZmMyIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+TG92ZXI8L3RleHQ+PC9zdmc+",isFavorite:!0,url:"/audio/shake-it-off.mp3"}]),d=e=>{if(!e)return v.value;const a=[{id:e.id||Date.now(),title:e.title,artist:e.artist||"Taylor Swift",duration:e.duration||200,cover:e.cover,isFavorite:e.isFavorite||!1,url:e.url||"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"}],l=[{id:2,title:"Cruel Summer",artist:"Taylor Swift",duration:178,cover:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzljMjdiMCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Q3J1ZWwgU3VtbWVyPC90ZXh0Pjwvc3ZnPg==",isFavorite:!0,url:"/audio/cruel-summer.mp3"},{id:3,title:"Cardigan",artist:"Taylor Swift",duration:239,cover:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZmOTgwMCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Q2FyZGlnYW48L3RleHQ+PC9zdmc+",isFavorite:!1,url:"/audio/cardigan.mp3"},{id:4,title:"Lover",artist:"Taylor Swift",duration:221,cover:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzIxOTZmMyIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+TG92ZXI8L3RleHQ+PC9zdmc+",isFavorite:!0,url:"/audio/shake-it-off.mp3"}];return[...a,...l]},m=(0,i.EW)({get:()=>e.modelValue,set:e=>a("update:modelValue",e)}),I=(0,i.EW)(()=>v.value[o.value]),b=(0,i.EW)(()=>e.album),k=(0,i.EW)(()=>r.value>0?u.value/r.value*100:0),g=(0,i.EW)(()=>o.value>0),M=(0,i.EW)(()=>o.value<v.value.length-1),Z=e=>{if(!e)return"0:00";const a=Math.floor(e/60),l=Math.floor(e%60);return`${a}:${l.toString().padStart(2,"0")}`},p=()=>{l.value&&(t.value?l.value.pause():l.value.play())},w=e=>{o.value=e,T()},W=()=>{M.value&&(o.value++,T())},L=()=>{g.value&&(o.value--,T())},T=()=>{l.value&&(l.value.src=I.value.url,l.value.load(),l.value.play())},y=e=>{if(!l.value)return;const a=e/100*r.value;l.value.currentTime=a},C=e=>{l.value&&(l.value.volume=e/100)},h=()=>{n.value=!n.value,n.value?(c.value=[...v.value],v.value=[...v.value].sort(()=>Math.random()-.5)):v.value=[...c.value],P.nk.success(n.value?"已开启随机播放":"已关闭随机播放")},j=e=>{e.isFavorite=!e.isFavorite,P.nk.success(e.isFavorite?"已添加到收藏":"已取消收藏")},f=()=>{l.value&&(r.value=l.value.duration)},F=()=>{l.value&&(u.value=l.value.currentTime)},B=()=>{t.value=!1,a("track-end",I.value),W()},Q=()=>{t.value=!0},G=()=>{t.value=!1},X=()=>{l.value&&l.value.pause()};return(0,i.wB)(()=>e.album,e=>{e&&console.log("专辑变化:",e)}),(0,i.wB)(()=>e.song,e=>{e&&(v.value=d(e),o.value=0,console.log("歌曲变化:",e))}),(0,i.wB)(m,e=>{e&&I.value&&T()}),(0,i.sV)(()=>{l.value=new Audio,l.value.addEventListener("loadedmetadata",f),l.value.addEventListener("timeupdate",F),l.value.addEventListener("ended",B),l.value.addEventListener("play",Q),l.value.addEventListener("pause",G),l.value.volume=s.value/100}),(0,i.hi)(()=>{l.value&&(l.value.removeEventListener("loadedmetadata",f),l.value.removeEventListener("timeupdate",F),l.value.removeEventListener("ended",B),l.value.removeEventListener("play",Q),l.value.removeEventListener("pause",G),l.value.pause())}),{audioRef:l,visible:m,isPlaying:t,currentTime:u,duration:r,volume:s,currentTrackIndex:o,playlist:v,currentTrack:I,currentAlbum:b,progress:k,canGoPrevious:g,canGoNext:M,formatTime:Z,togglePlay:p,playTrack:w,nextTrack:W,previousTrack:L,seekTo:y,setVolume:C,toggleShuffle:h,toggleFavorite:j,handleClose:X}}},H=l(1241);const R=(0,H.A)(X,[["render",Q],["__scopeId","data-v-434bca2e"]]);var V=R}}]);